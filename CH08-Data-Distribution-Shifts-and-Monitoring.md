# CH08 데이터 분포 시트프와 모니터링(Data Distribution Shifts and Monitoring)     

- 모델 성능은 프로덕션 환경에서 시간에 따라 저하됨   

- 모델 배포 후에도 이슈를 탐지하기 위해 성능을 지속적으로 모니터링해야 하며   
  발생한 이슈를 수정하는 업데이트를 계속 배포해야함.   
- ML 모델이 프로덕션 환경에서 실패하는 이유 중 '데이터 분포 시프트(shift)' 가 있는데,    
  이는 프로덕션 환경의 데이터 분포가 훈련하는 동안 모델에 노출된 데이터 분포와 다르거나 괴리가 점차 커질 때 발생함.    

- 프로덕션 환경에서 동작하는 ML 모델 대부분에 영향을 미칠 만큼 만연함   




## 8.1 머신러닝 시스템 장애 원인     

- 장애는 시스템에 대한 기대치가 한가지 이상 어긋날 때 일어남   

- 전통적인 소프트웨어에서는 주로 시스템 운영에 대한 기대치,   
  즉 시스템 로직이 레이턴시와 스루풋 같은 운영 지표의 기대 범위 안에서 실행되는지가 중요함     

- ML 시스템에서는 운영 지표와 ML 성능 지표 모두 신경 써야 함     
  Ex] 영어-프랑스 기계 번역의 운영 기대치는 영어 문장을 입력하면 시스템이 바로 레이턴시 1초 안에 프랑스어 번역문을 출력해 내는 것이고,     
  ML 성능상 기대치는 출력 중 99%는 주어진 영어 문장을 정확히 번역한 문장이어야 한다는 것임.    
  출력한 번역이 정확하지 않다고 해서 반드시 시스템 장애는 아님, 정확도 기대치는 약간의 오차를 허용함.  
  하지만, 서로 다른 영어 문장을 시스템에 연달아 입력하는데 계속해서 잘못된 번역문이 나온다면 두 번째 기대치를 어기므로 시스템 장애임.   

- 운영상 기대치를 어기는 문제는 감지하기가 쉬움.  
  시간 초과, 웹 페이지 404 오류, 메모리 부족, 세그멘테이션 결함 등 운영 중단을 수반하기 때문임. 
  그러나 ML 성능상 기대치를 어기는 문제는 프로덕션 환경에서 ML 모델 성능을 측정하고 모니터링해야 하므로 감지하기가 보다 어려움.    
  영어 - 프랑스어 기계 번역 시스템 예시에서 올바른 번역문이 무엇인지 모른다면 출력된 번역문 중 99%가 옳은지 그른지 판단하기 어려움.   
  사용자가 구글 번역문이 오역임을 인지하지 못해 오역을 사용하는 사례는 셀 수 없이 많은데     
  이러한 이유로 ML 시스템은 조용히 실패(fail silently) 한다고 함.    

